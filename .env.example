# =============================================================================
# CyberQuiz Environment Configuration - PRODUCTION REFERENCE
# =============================================================================
# Copy this file to .env and update with your actual values
# DO NOT commit .env to version control - it contains sensitive information
# For development, use .env.dev.example as reference instead

# IMPORTANT: This is a PRODUCTION template
# - All sensitive values MUST be changed
# - Use strong, randomly-generated passwords
# - Never use placeholder values in production

# Generate secure values with:
#   DB_PASSWORD: openssl rand -base64 24 | tr -d '=+/' | cut -c1-20
#   JWT_SECRET: openssl rand -base64 48
#   ADMIN_PASSWORD: openssl rand -base64 24 | tr -d '=+/' | cut -c1-24

# =============================================================================
# Database Configuration
# =============================================================================
DB_HOST=postgres
DB_PORT=5432
DB_NAME=cyberquiz
DB_USER=cyberquiz
DB_PASSWORD=GENERATE_SECURE_PASSWORD_HERE

# Full PostgreSQL connection URL (auto-constructed from above)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${DB_HOST}:${DB_PORT}/${POSTGRES_DB}

# Postgres image variables (must match DB_* values above)
POSTGRES_DB=cyberquiz
POSTGRES_USER=cyberquiz
POSTGRES_PASSWORD=GENERATE_SECURE_PASSWORD_HERE

# =============================================================================
# Security & Authentication
# =============================================================================
# JWT Secret - MUST be at least 48 characters for production
# Generate: openssl rand -base64 48
JWT_SECRET=GENERATE_SECURE_JWT_SECRET_MIN_48_CHARS_HERE

# JWT Token Expiry
JWT_EXPIRY=8h

# Admin User (created automatically on first startup)
# Change these to secure values
ADMIN_EMAIL=admin@cyberquiz.fr
ADMIN_PASSWORD=GENERATE_SECURE_ADMIN_PASSWORD_HERE

# =============================================================================
# Application Environment
# =============================================================================
# PRODUCTION: Always set to 'production'
# DEVELOPMENT: Set to 'development'
NODE_ENV=production

# =============================================================================
# AI Provider Configuration
# =============================================================================
# Ollama (local LLM) base URL
# Docker compose: http://ollama:11434
# Local host: http://localhost:11434
OLLAMA_BASE_URL=http://ollama:11434

# Allow external AI providers like OpenAI (true/false)
# SECURITY: Keep false unless explicitly needed
ALLOW_EXTERNAL_AI=false

# OpenAI API Key (only if ALLOW_EXTERNAL_AI=true)
# Leave commented out if not using external providers
# OPENAI_API_KEY=sk-...

# =============================================================================
# Vector Database (Qdrant)
# =============================================================================
# Qdrant vector search database URL
# Docker compose: http://qdrant:6333
# Local host: http://localhost:6333
QDRANT_URL=http://qdrant:6333

# Optional: Qdrant API Key for authentication
# Recommended for production
# QDRANT_API_KEY=your-qdrant-api-key

# =============================================================================
# Logging Configuration
# =============================================================================
# Log level: debug | info | warn | error
# PRODUCTION: Use 'warn' or 'error' for minimal logging
# DEVELOPMENT: Use 'debug' or 'info'
LOG_LEVEL=info

# Log database queries (true/false)
# PRODUCTION: Should be false
# DEVELOPMENT: Can be true for debugging
# LOG_QUERIES=false

# =============================================================================
# SECURITY CHECKLIST FOR PRODUCTION
# =============================================================================
# Before deploying to production, ensure:
# 
# [ ] All GENERATE_*_HERE placeholders are replaced with actual values
# [ ] DB_PASSWORD is at least 20 random characters
# [ ] JWT_SECRET is at least 48 random characters  
# [ ] ADMIN_PASSWORD is at least 20 random characters
# [ ] NODE_ENV is set to 'production'
# [ ] .env file is in .gitignore
# [ ] .env file has restricted file permissions (600)
# [ ] Backup credentials securely
# [ ] Setup database backups to external storage
# [ ] Enable HTTPS via reverse proxy (nginx, Caddy, etc.)
# [ ] Monitor application logs regularly
# [ ] Review and adjust log levels for production
# [ ] Keep Docker images updated regularly
#
# =============================================================================
